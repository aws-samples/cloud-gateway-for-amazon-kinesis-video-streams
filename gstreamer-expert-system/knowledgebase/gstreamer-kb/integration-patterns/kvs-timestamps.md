KVS service has limits in place to allow for min and max fragment durations. Most optimal, the fragment duration should be 1 - 6 seconds long.


#### SDK Timestamp Modes

Producer SDK (PIC in this case) has two modes of generating timestamps which are frame timestamp or SDK timestamp. In the first mode, the SDK gets the frame timestamp from the frame structure passed in (Frame structure) and processes it. In the SDK mode, the frame timestamp is ignored and a current timestamp is used as the frame is produced by putFrame API. The default GETTIME API is used. The frame mode is the default mode which is used by majority of the media pipelines. The SDK timestamp mode is used when the media pipeline timestamps are missing or jittery. The parameter is part of the StreamInfo StreamCaps structure: https://github.com/awslabs/amazon-kinesis-video-streams-pic/blob/master/src/client/include/com/amazonaws/kinesis/video/client/Include.h#L903


#### Producer and Service Side Timestamp Indexing

KVS has both the Producer and Service-side timestamps indexing. The Producer index is created from the incoming stream itself - whatever is reported by the MKV while the Service side timestamp is generated by the backend at the moment of ingestion. The KVS public consumer API (ex: listFragment) takes a parameter specifying either a Producer or a Service side timestamp. Both indexes are on an absolute time scale - even if a relative mode is used in the SDK to generate cluster timecodes starting from 0. Note: usage of the relative timestamps in the SDK is discouraged due to unanticipated side-effects with the producer time codes in the stream jumping back on each session (as they start from 0) and only very specific applications would need this behavior.

Producer timestamp for a fragment is derived from the value of the timestamp of the first frame in the fragment. If the SDK is configured with absolute timestamps then the first frame timestamp is used as is to index the fragment. If the stream is in relative timestamp mode then the first frame timestamp is added to the streaming session start timestamp, thus generating sequentially increasing timestamps.

Service side timestamps, on the other hand, correspond to the wall-clock NTP-sync-ed timestamp of when the fragment has been received - aka, the timestamp when the Received ACK is generated in the backend.

This has certain implications on the consumer side. For example, if the fragments are ingested in the Offline mode with fast network throughput, most of the fragments Service side timestamps will be very close to each other as it reflects network speed ingestion. The Producer timestamps will still be the ones that the original stream had been generated in. This means that the stream being ingested could have Producer timestamps in the past or in the future, depending on what the meaning of the timestamps are when the producer application generated the stream.


#### Indexing of the Stream for Producer Timestamp

